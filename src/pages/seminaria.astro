---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import SeminarCard from '../components/SeminarCard.astro';
import { getCollection } from 'astro:content';

const seminars = await getCollection('seminars');
seminars.sort((a, b) => b.data.date.localeCompare(a.data.date));

// Group by year
type SeminarEntry = (typeof seminars)[0];
const byYear: Record<number, SeminarEntry[]> = {};
for (const s of seminars) {
  const year = new Date(s.data.date).getFullYear();
  if (!byYear[year]) byYear[year] = [];
  byYear[year].push(s);
}
const years = Object.keys(byYear).map(Number).sort((a, b) => b - a);
---

<Layout
  title="Seminaria â€“ AIDMED | WydziaÅ‚ MiNI PW"
  description="Seria seminariÃ³w &quot;Informatyka w Medycynie i Biologii&quot; organizowana przez grupÄ™ AIDMED na Wydziale MiNI Politechniki Warszawskiej."
  lang="pl"
  alternateHref="/en/seminars"
  altLang="en"
>
  <Header lang="pl" alternateHref="/en/seminars" currentPath={Astro.url.pathname} />

  <main class="flex-1">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 py-10">
      <header class="mb-8">
        <h1 class="text-3xl font-bold text-grafitowy mb-2">Seminaria</h1>
        <p class="text-gray-600 leading-relaxed">
          Seria seminariÃ³w <em>â€Informatyka w Medycynie i Biologii"</em> organizowana przez ZakÅ‚ad Projektowania SystemÃ³w CAD/CAM i Komputerowego Wspomagania Medycyny.
        </p>
        <p class="text-sm text-gray-500 mt-2">
          ğŸ“… Åšrody, godz. 12:30 &nbsp;Â·&nbsp; ğŸ“ Sala 318, WydziaÅ‚ MiNI PW
        </p>
      </header>

      {years.map((year) => (
        <section class="mb-8">
          <h2 class="text-lg font-semibold text-szafirowy mb-3 border-b border-gray-200 pb-1">{year}</h2>
          <div>
            {byYear[year].map((seminar) => (
              <SeminarCard seminar={seminar} lang="pl" />
            ))}
          </div>
        </section>
      ))}
    </div>
  </main>

  <Footer lang="pl" />
</Layout>
